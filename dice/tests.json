{
  "valid": [
    ["d20", "simple d20 with default explosion"],
    ["1d20", "explicit single d20"],
    ["2d6", "two d6 dice"],
    ["3d8+5", "three d8 plus 5"],
    ["1d6+1d8", "d6 and d8 added together"],
    ["2d6+1d8+3", "multiple dice types with modifier"],
    ["1d20-2", "d20 minus 2"],
    ["2d6a", "2d6 with advantage 1 (implicit)"],
    ["2d6a1", "2d6 with advantage 1 (explicit)"],
    ["3d8a2", "3d8 with advantage 2"],
    ["2d6d", "2d6 with disadvantage 1 (implicit)"],
    ["3d4d2+6", "3d4 disadvantage 2 plus 6"],
    ["2d6x", "2d6 with no explosion"],
    ["3d4xa2+6", "3d4 no explosion, advantage 2, plus 6"],
    ["3d4a2x+6", "3d4 advantage 2, no explosion, plus 6 (flags in any order)"],
    ["1d8v", "d8 with vicious"],
    ["2d10v", "2d10 with vicious"],
    ["3d6!", "3d6 where any die may explode"],
    ["4d4v!", "4d4 any die may explode and be vicious"],
    ["4d4!v", "4d4 any die may explode and be vicious (flag order reversed)"],
    ["1d6^2+2", "d6 increase primary by 2, plus 2 total"],
    ["1d6^-2+2", "d6 decrease primary by 2, plus 2 total"],
    ["3d6b", "3d6 brutal (highest becomes primary)"],
    ["3d8b^2", "3d8 brutal with primary modifier"],
    ["1d6m2+2", "d6 miss on 2 or below, plus 2"],
    ["1d6m1", "d6 miss on 1 (explicit default)"],
    ["1d6m0", "d6 never miss (miss on 0 or below)"],
    ["1d20m3", "d20 miss on 3 or below"],
    ["1d4c+4", "d4 cheated, plus 4"],
    ["1d4m0c", "d4 always crit (never miss + cheat)"],
    ["2x1d6+1d4+6", "roll (1d6+1d4+6) twice"],
    ["3xd20", "roll d20 three times"],
    ["2x2d6a", "roll 2d6 with advantage twice"],
    ["1d8^8", "d8 with primary set to max (always crit)"],
    ["1d6b", "d6 brutal (no-op on single die but valid)"],
    ["1d100", "d100 (percentile die)"],
    ["2d66", "2d66 (unusual die size)"],
    ["1d6+1d8+0", "adding zero is valid"],
    ["1d6a", "advantage with implicit 1"],
    ["1d20a1", "advantage with only 1 die"],
    ["5d6", "five d6 dice"],
    ["1d20+1d12+1d10+1d8+1d6+1d4", "all standard dice together"],
    ["2d6bc", "2d6 brutal and cheated"],
    ["3d8a2bv", "3d8 advantage 2, brutal, vicious"],
    ["1d20m0c^5", "d20 always crit with primary modifier"],
    ["1d6m6", "d6 always miss (every roll â‰¤ 6)"],
    ["1d8^-8", "d8 with primary set to minimum (likely always miss)"],
    ["10xd6", "roll d6 ten times"],
    [
      "1d4+1d6+1d8+1d10+1d12+1d20+10",
      "complex multi-die expression with modifier"
    ],
    ["2d20d1", "2d20 with disadvantage 1"],
    ["4d6a3", "4d6 with advantage 3 (roll 7d6 drop 3 lowest)"],
    ["1d12v!b", "d12 vicious, all explode, brutal"],
    ["1d20m2c", "d20 miss on 2 or below, cheated"],
    ["2d8^3+5", "2d8 primary plus 3, total plus 5"],
    ["1d6^6", "d6 primary set to max (always crit)"],
    ["5x3d6", "roll 3d6 five times"],
    ["1d20a2", "d20 with advantage 2"],
    ["2d10!b^2", "2d10 all explode, brutal, primary plus 2"],
    ["1d8vc", "d8 vicious and cheated"],
    ["3d4!bc", "3d4 all explode, brutal, cheated"],
    ["1d20+5", "d20 plus 5"],
    ["2d6-1", "2d6 minus 1"],
    ["1d4m0", "d4 cannot miss"],
    ["1d12^-5", "d12 primary minus 5"],
    ["4d8d3", "4d8 disadvantage 3"],
    ["1d20m0", "d20 cannot miss"],
    ["2d6+2d6", "two separate 2d6 pools"],
    ["1d6^1", "d6 primary plus 1"],
    ["3d6ba2", "3d6 brutal, advantage 2"],
    ["1d20c", "d20 cheated"],
    ["2d8v^2", "2d8 vicious, primary plus 2"],
    ["1d10!v^3+1", "d10 all explode and vicious, primary plus 3, total plus 1"],
    ["1d6b", "brutal on single die is a no-op, but valid"],
    ["2d8m0c^+8", "^+8 and m0c both result in auto-crit, but valid"],
    ["2x 2d4 + 2", "spaces around operators and after repeat"],
    ["1d4 va2", "space before flags"],
    ["1d20 + 5", "spaces around plus operator"],
    ["2d6 - 1", "spaces around minus operator"],
    ["3x d6", "space after repeat x"],
    ["1d8 v a2", "spaces between flags"],
    ["2d6 ^ 2", "space around primary modifier"],
    ["1d20 m 3", "space before miss threshold"],
    ["2x 1d6 + 1d4 + 6", "spaces throughout complex expression"]
  ],
  "validCharacter": [
    ["1d6+STR", "d6 plus strength modifier"],
    ["2d6+LVL", "2d6 plus level"],
    ["1d20+DEX", "d20 plus dexterity"],
    ["1d8+INT", "d8 plus intelligence"],
    ["1d4+WIL", "d4 plus willpower"],
    ["2d6a+STR", "2d6 with advantage plus strength"],
    ["1d20m2+DEX", "d20 miss on 2 or below plus dexterity"],
    ["2x1d6+STR", "roll (d6+STR) twice"],
    ["1d6+1d8+STR", "d6 and d8 plus strength"],
    ["1d20-DEX", "d20 minus dexterity"],
    ["1d6 + STR", "spaces around stat modifier"],
    ["2x 1d6 + STR", "spaces with repeat and stat"]
  ],
  "invalid": [
    ["STR", "just a stat value"],
    ["1d6^", "missing primary modifier value"],
    ["1d6m", "missing miss threshold value"],
    ["1d6^9", "primary modifier exceeds die size (d6 max is 6)"],
    ["1d8^9", "primary modifier exceeds die size (d8 max is 8)"],
    ["1d6m7", "miss threshold exceeds die size"],
    ["1d8m9", "miss threshold exceeds die size"],
    ["1d6ad", "both advantage and disadvantage on same dice group"],
    ["2d8a2d1", "advantage and disadvantage conflict"],
    ["1d8vx", "vicious contradicts no explode"],
    ["4d6!x", "no explode contradicts explode all"],
    ["0d6", "zero dice count invalid"],
    ["0d20+5", "zero dice count invalid"],
    ["1d1", "die size must be at least 2"],
    ["1d0", "die size must be at least 2"],
    ["1d-4", "negative die size invalid"],
    ["2d6a0", "advantage 0 is meaningless"],
    ["1d8d0", "disadvantage 0 is meaningless"],
    ["1d20^21", "primary modifier exceeds die size"],
    ["3d6xb", "3d6 cannot be brutal without explosion"],
    ["1d6^-7", "negative primary modifier exceeds die size"],
    ["1d20m21", "miss threshold exceeds die size"],
    [
      "2d6a3",
      "advantage count exceeds or equals dice count (would need 5 dice for 2 to remain)"
    ],
    [
      "3d6a3",
      "advantage equals dice count (pointless - would need 6 dice, drop 3)"
    ],
    ["2d8d2", "disadvantage equals dice count (pointless)"],
    ["1d6cc", "duplicate cheat flag"],
    ["1d8vv", "duplicate vicious flag"],
    ["1d6aa", "duplicate advantage flag"],
    ["2d6a2a1", "duplicate advantage values"],
    ["1d20!!!", "redundant explode all flags"],
    ["1d6^10+5", "primary modifier far exceeds die size"],
    ["1d4m5", "miss threshold exceeds die size"],
    ["4d6!x", "explode all and no-explode"],
    ["1d8+STR+5", "cannot mix stat and number modifiers"],
    ["1d6+INT-2", "cannot mix stat and number modifiers"],
    ["1d6+STR+DEX", "cannot have multiple stat modifiers"],
    ["1d20+DEX+1d6+INT+3", "cannot mix multiple stats and numbers"]
  ]
}
